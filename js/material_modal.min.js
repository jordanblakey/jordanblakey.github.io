var Modal=function(){function t(t){return document.querySelectorAll(t)}var e=t(".modal__trigger"),n=t(".modal"),i=t(".modal__bg"),o=t(".modal__content"),a=t(".modal__close"),r=window,d=!1,l=400,s=e.length,c=function(t){t.preventDefault();var e=this,n=e.dataset.modal,i=n.length,o=n.substring(1,i),a=document.getElementById(o);m(e,a)},m=function(t,e){var n=document.getElementById("modal__temp");if(null===n){var i=document.createElement("div");i.id="modal__temp",t.appendChild(i),u(t,e,i)}},u=function(t,e,n){var i,o,a,d,s=t.getBoundingClientRect(),c=e,m=c.querySelector(".modal__content").getBoundingClientRect(),u=r.innerWidth/2,_=r.innerHeight/2;t.classList.add("modal__trigger--active"),a=m.width/s.width,d=m.height/s.height,a=a.toFixed(3),d=d.toFixed(3),i=Math.round(u-s.left-s.width/2),o=Math.round(_-s.top-s.height/2),c.classList.contains("modal--align-top")&&(o=Math.round(m.height/2+m.top-s.top-s.height/2)),t.style.transform="translate("+i+"px, "+o+"px)",t.style.webkitTransform="translate("+i+"px, "+o+"px)",n.style.transform="scale("+a+","+d+")",n.style.webkitTransform="scale("+a+","+d+")",window.setTimeout(function(){window.requestAnimationFrame(function(){v(c,n)})},l)},v=function(t,e){function n(){e.style.opacity="0",i.removeEventListener("transitionend",n,!1)}if(!d){var i=t.querySelector(".modal__content");t.classList.add("modal--active"),i.classList.add("modal__content--active"),i.addEventListener("transitionend",n,!1),d=!0}},_=function(t){function i(){setTimeout(function(){window.requestAnimationFrame(function(){r.remove()})},l-50)}t.preventDefault(),t.stopImmediatePropagation();var a=t.target,r=document.getElementById("modal__temp");if(d&&a.classList.contains("modal__bg")||a.classList.contains("modal__close")){r.style.opacity="1",r.removeAttribute("style");for(var c=0;c<s;c++)n[c].classList.remove("modal--active"),o[c].classList.remove("modal__content--active"),e[c].style.transform="none",e[c].style.webkitTransform="none",e[c].classList.remove("modal__trigger--active");r.addEventListener("transitionend",i,!1),d=!1}},f=function(){for(var t=0;t<s;t++)e[t].addEventListener("click",c,!1),a[t].addEventListener("click",_,!1),i[t].addEventListener("click",_,!1)},g=function(){f()};return{init:g}}();Modal.init();